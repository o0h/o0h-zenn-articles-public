---
title: "5章: 始めてのステップ実行"
free: true
---

簡単にテストを実行できる土台は手に入りました！

では、ここから「テストケースか、それ以外か」を判別している具体的なコードに迫れば良いでしょうか？

まず、「テストを実行できている」ということは「テストを実行している人がいる」と考えます。
そして、その人は必ず「実行に入る前に、テストケースか、それ以外かを見分けることができている」はずです。
すなわち、「実際に動いているテストの内部から、その手前・外側に遡っていけば、真相に近づけそうじゃないか？」と推察できるわけです。

今回は、そういう「ボトムアップ」ないし「インサイド・アウト」なアプローチを取ってみましょう。

## ブレイクポイントの利用、ステップの操作
早速、ブレイクポイントの出番です。

どのテストケースでも問題ないですが、例として37行目にブレイクポイントを設定してみます。
エディタ部分の左側、行番号にカーソルを乗せてください。
薄っすらと赤い丸が出てくるので、それをクリックします。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-33-59.png)

そして、メソッド定義がされている箇所 **以外** を右クリックして、今度は `Debug 'Dotenv(PHPUnit)`をクリックします。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-35-39.png)

コードの実行が、ブレイクポイントの箇所に差し掛かって「一時停止」されます！
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-38-00.png)

実際にここに至るまでのフレームが、スタックされて確認できます。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-38-52.png)

また、同フレーム上の一時変数などの内容が確認できます。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-39-28.png)

インスタンスや配列は、トグルして中身の要素に踏み込んで確認することも可能です。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-40-22.png)

実行をコード1行分進めるため、「Step Over」をしてみましょう。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-40-56.png)
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-41-34.png)

中に潜るには「Step Into」です！
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-42-08.png)
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-42-21.png)

メソッドの最終行でStep Overを押すと、呼び出し元(の次の行)に戻っていきます。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-43-02.png)
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-43-19.png)

確認したいことが確認できたら、「Resume Program」でプログラムの実行を復帰させます。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-53-39.png)

同様に、「Step Out」でも遊んでみましょう。
例えば、165行目の`$dotenv->load();` で処理を止めてみます。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-58-43.png)

ここから2段階ほどStep Intoでもぐり、`store->read()`の内部まで進めます
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-59-55.png)

そしてStep Outを実行すると、
`$this->parser->parse($this->store->read())` の `store->read()` の実行元である`parser->parse()`の所に進むことになります。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-09-00-30.png)A

40行目 `$dotenv->load();` までステップを進めて、そこでStep Intoを1回実行します。
そこからStep Outを押してみてください。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-08-50-05.png)

## フレームを行ったり来たり
ここまでは実際にプログラムの実行位置を操作して、その内容を確認してきました。  
別の方法で、より簡単に「どこから、どんな状況で呼び出されてココに来たんだっけ？」を確認する方法があります。
フレームを移動してみましょう

先程の `FileStore::read()`まで来た状態で、Threadsのウィンドウを確認してください
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-09-06-30.png)

ここに表示されている、Frameのスタックから任意の箇所をクリックすると・・・
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-09-07-10.png)
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-09-07-45.png)

フレームを自在に移動できます！

もちろん、実際に位置しているフレームとは異なる箇所を確認している時でも、一時変数の確認は(ある程度)可能です。
![](/images/2-2_hello-break/2-2_hello-break_2024-05-11-09-08-21.png)


さぁ、これで基本的なステップ実行に触れることができました！ 