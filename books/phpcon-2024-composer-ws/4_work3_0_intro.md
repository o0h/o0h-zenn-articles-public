---
title: "WORK-③: オートローディング処理を作ってみよう(dump-autoload)"
---

## ワークの概要とゴール

本日のTinyposer、最後は `dump-autoload` フェーズです！

※ ただし、お時間の都合上「PSR-4クラスローダー」に関しては”3分クッキング方式”になります。予め用意しておいたファイルを利用しましょう

インストールしたパッケージが、気軽に使えなかったらとても悲しいですよね。現代的なPHPのパッケージマネージャーを考える上で、オートローダーは欠かせないものです。

このワークでは、`work/3_dump-autoload/vendor`配下にあるパッケージ群の「`PSR-4`形式のオートロード」「ファイルのイーガーロード(先行読み込み・即時読み込み)」の機能を利用可能にしていきます。

![](/images/4_work3_0_intro/autoload-sample.png)
_こんなコードが、もう手が届く所まで来ています_

## ワーク3で抑えたいComposerの仕組み

Composerのエッセンスについて、このワークに取り組むことで学べるポイントは次のとおりです。

1. Composerとオートローダーの連携の具体的なフロー
2. PSR-4オートロードの簡単な実装・コンセプトの理解

## 本物との差分の例

本物のComposerと異なる点(機能が欠落している要素)は、次のとおりです。

- `vendor/composer/installed.json` の利用がなく、vendorの走査(`glob`)で愚直に実現している
- PSR-0, Class Map方式のオートロードに対応していない
- `optimized` オプションやAPCuの利用に対応していない
- 名前空間マップ等が相対パスになっておらず、実際にプロジェクトのアプリケーションを動かす環境でのdump実行が必要
